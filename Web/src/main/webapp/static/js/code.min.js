let sid=getUrlParam("sid");function submitInfo(a){return"/** \n * @Author: "+a.username+"\n * @Date: "+a.date+"\n * @PID: "+a.pid+"\n * @Result: "+getProRes(a.result,a.score,a.pos)+"\n * Powered By DOJ\n*/\n"}function getProRes(a,b,c){let flag;if(b==null||b===""){flag=""}else{flag=b}switch(a){case 0:return"Accepted";case 1:return"PE on test "+c;case 2:return"TLE on test "+c;case 3:return"MLE on test "+c;case 4:return"WA on test "+c;case 5:return"RE on test "+c;case 6:return"OLE on test "+c;case 7:return"Waiting";case 8:return"System Error";case 9:return"Compilation Error"}}$.getJSON("/api/submit/getcode?sid="+sid,function(a){if(a.state!==0){narn("log","您现在不能查看别人的代码")}else{let table=$("div table tbody");table.append(HTML.tr(HTML.td(sid)+HTML.td(HTML.a("problem.jsp?pid="+a.pid,a.pid+" - "+a.ptitle))+HTML.td(getStyleName(a.username+"|"+a.rating))+HTML.td(getProRes(a.result,a.score,a.pos))+HTML.td(a.time_used==null?"-":(a.time_used+"ms"))+HTML.td(a.memory_used==null?"-":(a.memory_used+"KB"))+HTML.td(a.lang)+HTML.td(a.size)+HTML.td(a.date)));$("#newhack input[name='sid']").val(sid);if(a.result===0){$("#upHackData").show()}if(a.collect){$("#submitCollection").html('<font color="green"><span class="glyphicon glyphicon-star"></span>已收藏</font>')}$(".hljs code").html(hljs.highlightAuto(submitInfo(a)+a.code).value);$("code").each(function(){$(this).html("<ol><li>"+$(this).html().replace(/\n/g,"\n</li><li>")+"\n</li></ol>")})}});function collect(){$.ajax({url:"/api/submit/add/collection?sid="+sid,type:"POST",contentType:"application/json",dataType:"json",success:function(a){if(a.state===0){if($("#submitCollection").find("font").length===0){$("#problemIsCollection").html('<font color="green"><span class="glyphicon glyphicon-star"></span>已收藏</font>');narn("success","成功收藏")}else{$("#problemIsCollection").html("<span class='glyphicon glyphicon-star-empty'></span>收藏");narn("log","成功取消收藏")}}else{narn("log","未知错误")}}})};