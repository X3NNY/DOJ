let spnum;let num;let user="",pid=-1,res=-1,lang="";let page=getUrlParam("page");function loadStatus(b,a,d,f,e){if(!b){b=""}if(!a){a=-1}if(!d){d=-1}if(!f){f=""}if(!e||e<=0){page=1}let statusPage=$("#statusPage");pageList(statusPage,page,spnum);$.ajax({url:"/api/submit/list?page="+page,type:"POST",contentType:"application/json",data:JSON.stringify({pid:a,username:b,res:d,lang:f}),dataType:"json",success:function(g){let sList=$("#statusList tbody");sList.empty();for(let i=0;i<g.length;i++){let tp=g[i];let c="default";if(tp.state){c="info"}let size=tp.size;if(tp.viewable||tp.state){size=HTML.a("code.jsp?sid="+tp.sid,tp.size)}sList.append(HTML.trClass(c,HTML.td(tp.sid)+HTML.tdC(getStyleName(tp.username))+HTML.tdC(HTML.a("/problem.jsp?pid="+tp.pid,tp.pid))+HTML.td(getProRes(tp.result,tp.score,tp.pos,tp.sid))+HTML.tdC(tp.lang)+HTML.td(tp.time_used==null?"-":tp.time_used+"ms")+HTML.td(tp.memory_used==null?"-":tp.memory_used+"KB")+HTML.tdC(tp.date)+HTML.td(size)))}},error:function(g){console.log(g)}})}function getPages(b,a,d,e){if(!b){b=""}if(!a){a=-1}if(!d){d=-1}if(!e){e=""}$.ajax({url:"/api/submit/getpages",type:"POST",contentType:"application/json",data:JSON.stringify({pid:a,username:b,res:d,lang:e}),dataType:"json",success:function(f){spnum=f.pages;num=f.num;let statusPage=$("#statusPage");pageList(statusPage,1,spnum)}})}function toPage(a){page=a;let _pid=$("#statusProblemSelect").val();let _username=$("#statusUser").val();let _lang=$("#statusLangSelect  option:selected").val();let _res=$("#statusResultSelect  option:selected").val();_lang=_lang.indexOf("ALL")===-1?_lang:"";loadStatus(_username,_pid,_res,_lang,page)}function getProRes(b,d,e,a){let s;switch(b){case 0:s='<span class="label label-success">Accepted</span>';break;case 1:s='<span class="label label-info">PE on test '+e+"</span>";break;case 2:s='<span class="label label-warning">TLE on test '+e+"</span>";break;case 3:s='<span class="label label-warning">MLE on test '+e+"</span>";break;case 4:s='<span class="label label-danger">WA on test '+e+"</span>";break;case 5:s='<span class="label label-warning">RE on test '+e+"</span>";break;case 6:s='<span class="label label-warning">OLE on test '+e+"</span>";break;case 7:s="<span class=\"label label-default\">Waiting</span><img src='/media/img/status/wating1.gif' />";break;case 8:s='<span class="label label-primary">System Error</span>';break;case 9:s='<span class="label label-info"><a href="/statusInfo.jsp?sid='+a+'">Compilation Error</a>';break}if(d!=null&&d!==-1&&b<7){if(b===0){return s+HTML.bS("color: green;"," "+d)}else{return s+HTML.bS("color: red;"," "+d)}}return s}function statusSearch(){let _pid=$("#statusProblemSelect").val();let _username=$("#statusUser").val();let _lang=$("#statusLangSelect  option:selected").val();let _res=$("#statusResultSelect  option:selected").val();_lang=_lang.indexOf("ALL")===-1?_lang:"";page=1;getPages(_username,_pid,_res,_lang);loadStatus(_username,_pid,_res,_lang,1)}getPages(null,null,null,null);toPage(1);document.onkeydown=function(a){if((a.keyCode||a.which)==13){statusSearch()}};setInterval(function(){toPage(page)},5000);